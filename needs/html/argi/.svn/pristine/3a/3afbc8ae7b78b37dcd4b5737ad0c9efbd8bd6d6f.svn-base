(function(n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Validator=n()})(function(){return function g(k,l,d){function c(f,a){if(!l[f]){if(!k[f]){var b="function"==typeof require&&require;if(!a&&b)return b(f,!0);if(h)return h(f,!0);a=Error("Cannot find module '"+f+"'");throw a.code="MODULE_NOT_FOUND",a;}a=l[f]=
{exports:{}};k[f][0].call(a.exports,function(a){var b=k[f][1][a];return c(b?b:a)},a,a.exports,g,k,l,d)}return l[f].exports}for(var h="function"==typeof require&&require,m=0;m<d.length;m++)c(d[m]);return c}({1:[function(g,k,l){function d(c,d){this.onResolvedAll=d;this.onFailedOne=c;this.resolvers={};this.resolversCount=0;this.passed=[];this.failed=[];this.firing=!1}d.prototype={add:function(c){var d=this.resolversCount;this.resolvers[d]=c;this.resolversCount++;return d},resolve:function(c){c=this.resolvers[c];
!0===c.passes?this.passed.push(c):!1===c.passes&&(this.failed.push(c),this.onFailedOne(c));this.fire()},isAllResolved:function(){return this.passed.length+this.failed.length===this.resolversCount},fire:function(){if(this.firing&&this.isAllResolved())this.onResolvedAll(0===this.failed.length)},enableFiring:function(){this.firing=!0}};k.exports=d},{}],2:[function(g,k,l){k.exports={replacements:{between:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{min:h[0],max:h[1]})},
required_if:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{other:h[0],value:h[1]})},required_unless:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{other:h[0],value:h[1]})},required_with:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{field:h[0]})},required_with_all:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{fields:h.join(", ")})},required_without:function(d,c){var h=c.getParameters();
return this._replacePlaceholders(c,d,{field:h[0]})},required_without_all:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{fields:h.join(", ")})},after:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{after:this._getAttributeName(h[0])})},before:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{before:this._getAttributeName(h[0])})},after_or_equal:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,
d,{after_or_equal:this._getAttributeName(h[0])})},before_or_equal:function(d,c){var h=c.getParameters();return this._replacePlaceholders(c,d,{before_or_equal:this._getAttributeName(h[0])})}},formatter:function(d){return d.replace(/[_\[]/g," ").replace(/]/g,"")}}},{}],3:[function(g,k,l){g=function(){this.errors={}};g.prototype={constructor:g,add:function(d,c){this.has(d)||(this.errors[d]=[]);-1===this.errors[d].indexOf(c)&&this.errors[d].push(c)},get:function(d){return this.has(d)?this.errors[d]:[]},
first:function(d){return this.has(d)?this.errors[d][0]:!1},all:function(){return this.errors},has:function(d){return this.errors.hasOwnProperty(d)?!0:!1}};k.exports=g},{}],4:[function(g,k,l){var d=g("./messages");g("./lang/en");k.exports={messages:{},_set:function(c,d){this.messages[c]=d},_setRuleMessage:function(c,d,g){this._load(c);void 0===g&&(g=this.messages[c].def);this.messages[c][d]=g},_load:function(c){if(!this.messages[c]){var d=g("./lang/"+c);this._set(c,d)}},_get:function(c){this._load(c);
return this.messages[c]},_make:function(c){this._load(c);return new d(c,this.messages[c])}}},{"./lang/en":5,"./messages":6}],5:[function(g,k,l){k.exports={accepted:"The :attribute must be accepted.",after:"The :attribute must be after :after.",after_or_equal:"The :attribute must be equal or after :after_or_equal.",alpha:"The :attribute field must contain only alphabetic characters.",alpha_dash:"The :attribute field may only contain alpha-numeric characters, as well as dashes and underscores.",alpha_num:"The :attribute field must be alphanumeric.",
before:"The :attribute must be before :before.",before_or_equal:"The :attribute must be equal or before :before_or_equal.",between:"The :attribute field must be between :min and :max.",confirmed:"The :attribute confirmation does not match.",email:"The :attribute format is invalid.",date:"The :attribute is not a valid date format.",def:"The :attribute attribute has errors.",digits:"The :attribute must be :digits digits.",different:"The :attribute and :different must be different.","in":"The selected :attribute is invalid.",
integer:"The :attribute must be an integer.",min:{numeric:"The :attribute must be at least :min.",string:"The :attribute must be at least :min characters."},max:{numeric:"The :attribute may not be greater than :max.",string:"The :attribute may not be greater than :max characters."},not_in:"The selected :attribute is invalid.",numeric:"The :attribute must be a number.",present:"The :attribute field must be present (but can be empty).",required:"The :attribute field is required.",required_if:"The :attribute field is required when :other is :value.",
required_unless:"The :attribute field is required when :other is not :value.",required_with:"The :attribute field is required when :field is not empty.",required_with_all:"The :attribute field is required when :fields are not empty.",required_without:"The :attribute field is required when :field is empty.",required_without_all:"The :attribute field is required when :fields are empty.",same:"The :attribute and :same fields must match.",size:{numeric:"The :attribute must be :size.",string:"The :attribute must be :size characters."},
string:"The :attribute must be a string.",url:"The :attribute format is invalid.",regex:"The :attribute format is invalid.",attributes:{}}},{}],6:[function(g,k,l){var d=g("./attributes");g=function(c,d){this.lang=c;this.messages=d;this.customMessages={};this.attributeNames={}};g.prototype={constructor:g,_setCustom:function(c){this.customMessages=c||{}},_setAttributeNames:function(c){this.attributeNames=c},_setAttributeFormatter:function(c){this.attributeFormatter=c},_getAttributeName:function(c){var d=
c;if(this.attributeNames.hasOwnProperty(c))return this.attributeNames[c];this.messages.attributes.hasOwnProperty(c)&&(d=this.messages.attributes[c]);this.attributeFormatter&&(d=this.attributeFormatter(d));return d},all:function(){return this.messages},render:function(c){if(c.customMessage)return c.customMessage;var h=this._getTemplate(c);return d.replacements[c.name]?d.replacements[c.name].apply(this,[h,c]):this._replacePlaceholders(c,h,{})},_getTemplate:function(c){for(var d=this.messages,g=d.def,
f=this.customMessages,a=[c.name+"."+c.attribute,c.name],b=0,e;b<a.length;b++)if(e=a[b],f.hasOwnProperty(e)){g=f[e];break}else if(d.hasOwnProperty(e)){g=d[e];break}"object"===typeof g&&(g=g[c._getValueType()]);return g},_replacePlaceholders:function(c,d,g){var f,a;g.attribute=this._getAttributeName(c.attribute);g[c.name]=g[c.name]||c.getParameters().join(",");if("string"===typeof d&&"object"===typeof g)for(a in f=d,g)f=f.replace(new RegExp(":"+a,"g"),g[a]);return f}};k.exports=g},{"./attributes":2}],
7:[function(g,k,l){function d(a){if("string"===typeof a){var b=a.indexOf(".");0<b&&6>=b&&(a=a.replace(/\./g,"-"))}var e=new Date(a);a=e.getFullYear();var b=e.getMonth(),e=e.getDate(),c=[31,0===a%4&&0!==a%100||0===a%400?29:28,31,30,31,30,31,31,30,31,30,31];return 1E3>a||isNaN(b)||12<b+1||isNaN(e)||e>c[b]?!1:!0}function c(a,b,e){this.name=a;this.fn=b;this.passes=null;this._customMessage=void 0;this.async=e}var h={required:function(a){return void 0===a||null===a?!1:0<String(a).replace(/\s/g,"").length?
!0:!1},required_if:function(a,b,e){b=this.getParameters();return this.validator._objectPath(this.validator.input,b[0])===b[1]?this.validator.getRule("required").validate(a):!0},required_unless:function(a,b,e){b=this.getParameters();return this.validator._objectPath(this.validator.input,b[0])!==b[1]?this.validator.getRule("required").validate(a):!0},required_with:function(a,b,e){return this.validator._objectPath(this.validator.input,b)?this.validator.getRule("required").validate(a):!0},required_with_all:function(a,
b,e){b=this.getParameters();for(e=0;e<b.length;e++)if(!this.validator._objectPath(this.validator.input,b[e]))return!0;return this.validator.getRule("required").validate(a)},required_without:function(a,b,e){return this.validator._objectPath(this.validator.input,b)?!0:this.validator.getRule("required").validate(a)},required_without_all:function(a,b,e){b=this.getParameters();for(e=0;e<b.length;e++)if(this.validator._objectPath(this.validator.input,b[e]))return!0;return this.validator.getRule("required").validate(a)},
"boolean":function(a){return!0===a||!1===a||0===a||1===a||"0"===a||"1"===a||"true"===a||"false"===a},size:function(a,b,e){return a?(b=parseFloat(b),this.getSize()===b):!0},string:function(a,b,e){return"string"===typeof a},sometimes:function(a){return!0},min:function(a,b,e){return this.getSize()>=b},max:function(a,b,e){return this.getSize()<=b},between:function(a,b,e){b=this.getParameters();a=this.getSize();e=parseFloat(b[0],10);b=parseFloat(b[1],10);return a>=e&&a<=b},email:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},
numeric:function(a){var b;b=Number(a);return"number"!==typeof b||isNaN(b)||"boolean"===typeof a?!1:!0},array:function(a){return a instanceof Array},url:function(a){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(a)},alpha:function(a){return/^[a-zA-Z]+$/.test(a)},alpha_dash:function(a){return/^[a-zA-Z0-9_\-]+$/.test(a)},alpha_num:function(a){return/^[a-zA-Z0-9]+$/.test(a)},same:function(a,b){return this.validator._flattenObject(this.validator.input)[b]===
a?!0:!1},different:function(a,b){return this.validator._flattenObject(this.validator.input)[b]!==a?!0:!1},"in":function(a,b){var e;a&&(e=this.getParameters());if(a&&!(a instanceof Array)){var c=a;for(b=0;b<e.length;b++)if("string"===typeof e[b]&&(c=String(a)),c===e[b])return!0;return!1}if(a&&a instanceof Array)for(b=0;b<a.length;b++)if(0>e.indexOf(a[b]))return!1;return!0},not_in:function(a,b){b=this.getParameters();for(var e=b.length,c=!0,d=0;d<e;d++){var g=a;"string"===typeof b[d]&&(g=String(a));
if(g===b[d]){c=!1;break}}return c},accepted:function(a){return"on"===a||"yes"===a||1===a||"1"===a||!0===a?!0:!1},confirmed:function(a,b,e){return this.validator.input[e+"_confirmation"]===a?!0:!1},integer:function(a){return String(parseInt(a,10))===String(a)},digits:function(a,b){return this.validator.getRule("numeric").validate(a)&&String(a).length===parseInt(b)?!0:!1},regex:function(a,b){var e=/[g|i|m]{1,3}$/,c=b.match(e),c=c?c[0]:"";b=b.replace(e,"").slice(1,-1);b=new RegExp(b,c);return!!a.match(b)},
date:function(a,b){return d(a)},present:function(a){return"undefined"!==typeof a},after:function(a,b){b=this.validator.input[b];return d(b)&&d(a)?(new Date(b)).getTime()<(new Date(a)).getTime()?!0:!1:!1},after_or_equal:function(a,b){b=this.validator.input[b];return d(b)&&d(a)?(new Date(b)).getTime()<=(new Date(a)).getTime()?!0:!1:!1},before:function(a,b){b=this.validator.input[b];return d(b)&&d(a)?(new Date(b)).getTime()>(new Date(a)).getTime()?!0:!1:!1},before_or_equal:function(a,b){b=this.validator.input[b];
return d(b)&&d(a)?(new Date(b)).getTime()>=(new Date(a)).getTime()?!0:!1:!1}},m=function(){throw Error("Validator `"+this.name+"` is not defined!");},f;c.prototype={validate:function(a,b,c,d){var e=this;this._setValidatingData(c,a,b);return"function"===typeof d?(this.callback=d,d=function(a,b){e.response(a,b)},this.async?this._apply(a,b,c,d):d(this._apply(a,b,c))):this._apply(a,b,c)},_apply:function(a,b,c,d){return(this.isMissed()?m:this.fn).apply(this,[a,b,c,d])},_setValidatingData:function(a,b,
c){this.attribute=a;this.inputValue=b;this.ruleValue=c},getParameters:function(){var a=[];"string"===typeof this.ruleValue&&(a=this.ruleValue.split(","));"number"===typeof this.ruleValue&&a.push(this.ruleValue);this.ruleValue instanceof Array&&(a=this.ruleValue);return a},getSize:function(){var a=this.inputValue;return a instanceof Array?a.length:"number"===typeof a?a:this.validator._hasNumericRule(this.attribute)?parseFloat(a,10):a.length},_getValueType:function(){return"number"===typeof this.inputValue||
this.validator._hasNumericRule(this.attribute)?"numeric":"string"},response:function(a,b){this.passes=void 0===a||!0===a;this._customMessage=b;this.callback(this.passes,b)},setValidator:function(a){this.validator=a},isMissed:function(){return"function"!==typeof this.fn},get customMessage(){return this.isMissed()?f:this._customMessage}};k.exports={asyncRules:[],implicitRules:"required required_if required_unless required_with required_with_all required_without required_without_all accepted present".split(" "),
make:function(a,b){var e=this.isAsync(a);a=new c(a,h[a],e);a.setValidator(b);return a},isAsync:function(a){for(var b=0,c=this.asyncRules.length;b<c;b++)if(this.asyncRules[b]===a)return!0;return!1},isImplicit:function(a){return-1<this.implicitRules.indexOf(a)},register:function(a,b){h[a]=b},registerImplicit:function(a,b){this.register(a,b);this.implicitRules.push(a)},registerAsync:function(a,b){this.register(a,b);this.asyncRules.push(a)},registerAsyncImplicit:function(a,b){this.registerImplicit(a,
b);this.asyncRules.push(a)},registerMissedRuleValidator:function(a,b){m=a;f=b}}},{}],8:[function(g,k,l){var d=g("./rules"),c=g("./lang"),h=g("./errors");l=g("./attributes");var m=g("./async"),f=function(a,b,e){var d=f.getDefaultLang();this.input=a||{};this.messages=c._make(d);this.messages._setCustom(e);this.setAttributeFormatter(f.prototype.attributeFormatter);this.errors=new h;this.errorCount=0;this.hasAsync=!1;this.rules=this._parseRules(b)};f.prototype={constructor:f,lang:"en",numericRules:["integer",
"numeric"],attributeFormatter:l.formatter,check:function(){for(var a in this.rules){var b=this.rules[a],c=this._objectPath(this.input,a);if(!this._hasRule(a,["sometimes"])||this._suppliedWithData(a))for(var d=0,g=b.length,f,h;d<g&&(h=b[d],f=this.getRule(h.name),!this._isValidatable(f,c)||((h=f.validate(c,h.value,a))||this._addFailure(f),!this._shouldStopValidating(a,h)));d++);}return 0===this.errorCount},checkAsync:function(a,b){var c=this;a=a||function(){};b=b||function(){};var d=new m(function(a,
b){c._addFailure(a,b)},function(c){c?a():b()}),g=function(a,b,c,e){return function(){var f=d.add(e);e.validate(a,b.value,c,function(){d.resolve(f)})}},f;for(f in this.rules){var h=this.rules[f],k=this._objectPath(this.input,f);if(!this._hasRule(f,["sometimes"])||this._suppliedWithData(f))for(var l=0,r=h.length,p,q;l<r;l++)q=h[l],p=this.getRule(q.name),this._isValidatable(p,k)&&g(k,q,f,p)()}d.enableFiring();d.fire()},_addFailure:function(a){var b=this.messages.render(a);this.errors.add(a.attribute,
b);this.errorCount++},_flattenObject:function(a){function b(a,d){if(d||0!==Object.getOwnPropertyNames(a).length)if(Object(a)!==a||Array.isArray(a))c[d]=a;else{var e=!0,f;for(f in a)e=!1,b(a[f],d?d+"."+f:f);e&&(c[d]={})}}var c={};a&&b(a);return c},_objectPath:function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b];b=b.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".");var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);a=0;for(d=b.length;a<d;a++)if(Object.hasOwnProperty.call(c,
b[a]))c=c[b[a]];else return;return c},_parseRules:function(a){var b={};a=this._flattenObject(a);for(var c in a)this._parseRulesCheck(c,a[c],b);return b},_parseRulesCheck:function(a,b,c,d){-1<a.indexOf("*")?this._parsedRulesRecurse(a,b,c,d):this._parseRulesDefault(a,b,c,d)},_parsedRulesRecurse:function(a,b,c,d){var e=a.substr(0,a.indexOf("*")-1);if(e=this._objectPath(this.input,e))for(var f=0;f<e.length;f++){var g=d?d.slice():[];g.push(f);this._parseRulesCheck(a.replace("*",f),b,c,g)}},_parseRulesDefault:function(a,
b,c,f){var e=[];b instanceof Array&&(b=this._prepareRulesArray(b));"string"===typeof b&&(b=b.split("|"));for(var g=0,h=b.length,k;g<h;g++)k="string"===typeof b[g]?this._extractRuleAndRuleValue(b[g]):b[g],k.value&&(k.value=this._replaceWildCards(k.value,f),this._replaceWildCardsMessages(f)),d.isAsync(k.name)&&(this.hasAsync=!0),e.push(k);c[a]=e},_replaceWildCards:function(a,b){if(!b)return a;var c=a;b.forEach(function(a){var b=c.indexOf("*");if(-1===b)return c;c=c.substr(0,b)+a+c.substr(b+1)});return c},
_replaceWildCardsMessages:function(a){var b=this.messages.customMessages,c=this;Object.keys(b).forEach(function(d){if(a){var e=c._replaceWildCards(d,a);b[e]=b[d]}});this.messages._setCustom(b)},_prepareRulesArray:function(a){for(var b=[],c=0,d=a.length;c<d;c++)if("object"===typeof a[c])for(var f in a[c])b.push({name:f,value:a[c][f]});else b.push(a[c]);return b},_suppliedWithData:function(a){return this.input.hasOwnProperty(a)},_extractRuleAndRuleValue:function(a){var b={};b.name=a;0<=a.indexOf(":")&&
(a=a.split(":"),b.name=a[0],b.value=a.slice(1).join(":"));return b},_hasRule:function(a,b){a=this.rules[a]||[];for(var c=0,d=a.length;c<d;c++)if(-1<b.indexOf(a[c].name))return!0;return!1},_hasNumericRule:function(a){return this._hasRule(a,this.numericRules)},_isValidatable:function(a,b){return d.isImplicit(a.name)?!0:this.getRule("required").validate(b)},_shouldStopValidating:function(a,b){var c=this.stopOnAttributes;return"undefined"===typeof c||!1===c||!0===b?!1:c instanceof Array?-1<c.indexOf(a):
!0},setAttributeNames:function(a){this.messages._setAttributeNames(a)},setAttributeFormatter:function(a){this.messages._setAttributeFormatter(a)},getRule:function(a){return d.make(a,this)},stopOnError:function(a){this.stopOnAttributes=a},passes:function(a){return this._checkAsync("passes",a)?this.checkAsync(a):this.check()},fails:function(a){return this._checkAsync("fails",a)?this.checkAsync(function(){},a):!this.check()},_checkAsync:function(a,b){b="function"===typeof b;if(this.hasAsync&&!b)throw a+
" expects a callback when async rules are being tested.";return this.hasAsync||b}};f.setMessages=function(a,b){c._set(a,b);return this};f.getMessages=function(a){return c._get(a)};f.useLang=function(a){this.prototype.lang=a};f.getDefaultLang=function(){return this.prototype.lang};f.setAttributeFormatter=function(a){this.prototype.attributeFormatter=a};f.stopOnError=function(a){this.prototype.stopOnAttributes=a};f.register=function(a,b,e){var g=f.getDefaultLang();d.register(a,b);c._setRuleMessage(g,
a,e)};f.registerImplicit=function(a,b,e){var g=f.getDefaultLang();d.registerImplicit(a,b);c._setRuleMessage(g,a,e)};f.registerAsync=function(a,b,e){var g=f.getDefaultLang();d.registerAsync(a,b);c._setRuleMessage(g,a,e)};f.registerAsyncImplicit=function(a,b,e){var g=f.getDefaultLang();d.registerAsyncImplicit(a,b);c._setRuleMessage(g,a,e)};f.registerMissedRuleValidator=function(a,b){d.registerMissedRuleValidator(a,b)};k.exports=f},{"./async":1,"./attributes":2,"./errors":3,"./lang":4,"./rules":7}]},
{},[8])(8)});
